# Claude Code 工具库

以下是 Claude Code 可用的核心工具及其使用规范。

## 1. 文件读取与写入 (File I/O)

### 3.1 Read 工具 (读取)

**功能**：从本地文件系统读取文件。可以直接访问机器上的任何文件（假设路径有效）。允许读取不存在的文件（将返回错误）。 **使用规范**：

- `file_path` 参数必须是**绝对路径**，不能是相对路径。
- 默认从头读取最多 2000 行。
- 支持指定行号偏移量 (`offset`) 和限制 (`limit`)（适用于大文件）。
- 超过 2000 个字符的行将被截断。
- 结果以 `cat -n` 格式返回（行号从 1 开始）。
- 支持读取图像文件（如 PNG, JPG 等）。
- **支持批处理**：可以在单个响应中调用多个工具。
- 常用于读取屏幕截图。

### 3.2 Write 工具 (写入)

**功能**：将文件写入本地文件系统。 **使用规范**：

- 如果路径下存在文件，此工具将**覆盖**现有文件。
- **前置条件**：如果是现有文件，**必须**先使用 `Read` 工具读取文件内容。如果未先读取，写入将失败。
- **原则**：始终优先编辑代码库中的现有文件。除非明确要求，否则**切勿**创建新文件。
- **文档限制**：**切勿**主动创建文档文件 (`*.md`) 或 README 文件。仅在用户明确要求时才创建。
- **表情符号**：除非用户明确要求，否则避免在文件中写入表情符号。

### 3.7 LS 工具 (列出文件)

**功能**：列出给定路径下的文件和目录。 **使用规范**：

- `path` 参数必须是**绝对路径**。
- 支持通过 `ignore` 参数提供 glob 模式数组来忽略特定文件。
- **建议**：如果你知道要搜索哪些目录，通常应优先使用 `Glob` 和 `Grep` 工具。

------

## 2. 代码编辑与修改 (Editing)

### 3.3 Edit 工具 (编辑)

**功能**：在文件中执行精确的字符串替换。 **使用规范**：

- **前置条件**：在编辑之前，必须在对话中至少使用过一次 `Read` 工具。
- **格式要求**：编辑 `Read` 工具输出的文本时，确保保留**精确的缩进**。
- **原则**：始终优先编辑现有文件，除非明确要求，否则不写新文件。
- **唯一性**：如果 `old_string` 在文件中不是唯一的，编辑将**失败**。
- **替换所有**：使用 `replace_all` 在整个文件中替换或重命名字符串。

### 3.4 MultiEdit 工具 (多重编辑)

**功能**：在一次操作中对单个文件进行多次编辑。基于 Edit 工具构建，允许高效执行多个查找和替换操作。 **使用规范**：

- **场景**：当需要修改同一文件的不同部分时，**优先**使用此工具而不是 Edit 工具。
- **顺序**：所有编辑按提供的顺序依次应用。
- **依赖**：每个编辑操作都基于上一次编辑的结果。
- **原子性**：所有编辑必须都有效操作才能成功——如果有任何编辑失败，则**任何编辑都不会应用**。

------

## 3. 搜索与定位 (Search & Navigation)

### 3.5 Grep 工具 (内容搜索)

**功能**：基于 `ripgrep` 构建的强大搜索工具。 **使用规范**：

- **强制**：始终使用 `Grep` 进行搜索任务。**切勿**作为 Bash 命令调用 `grep` 或 `rg`。
- 支持完整的正则表达式语法（例如 `"log.*Error"`, `"function\\s+\\w+"`）。
- 可以通过 `glob` 参数（如 `"*.js"`, `"**/*.tsx"`）或 `type` 参数过滤文件。
- **输出模式**：`content` 显示匹配行，`files_with_matches` 仅显示文件路径。
- **语法**：使用 ripgrep 语法（字面量大括号需要转义）。
- **多行匹配**：默认情况下，模式仅在单行内匹配。

### 3.6 Glob 工具 (文件名搜索)

**功能**：快速文件模式匹配工具，适用于任何大小的代码库。 **使用规范**：

- 支持 glob 模式，如 `"**/*.js"` 或 `"src/**/*.ts"`。
- 返回按修改时间排序的匹配文件路径。
- **场景**：当你需要按名称模式查找文件时使用。
- **复杂搜索**：如果是可能需要多轮 glob 和 grep 的开放式搜索，请使用 `Agent` 工具。
- **支持批处理**：可以在单个响应中调用多个工具。

------

## 4. 网络能力 (Web Capabilities)

### 3.8 WebFetch 工具 (网页获取)

**功能**：获取指定 URL 的内容并使用 AI 模型进行处理。 **输入**：一个 URL 和一个提示词 (prompt)。 **流程**：获取 URL 内容 -> 将 HTML 转换为 Markdown -> 使用小型快速模型根据提示词处理内容 -> 返回模型关于内容的响应。 **使用规范**：

- **场景**：当你需要检索和分析网络内容时使用。
- **优先级**：如果提供了 MCP（Model Context Protocol）网络获取工具，请优先使用那个。
- URL 必须是格式完整的有效 URL（HTTP 会自动升级为 HTTPS）。
- 如果内容非常大，结果可能会被摘要。
- 包含 15 分钟的自动清理缓存。

### 3.9 WebSearch 工具 (网络搜索)

**功能**：允许 Claude 搜索网络并利用结果来回答问题。提供当前事件和最新数据。 **使用规范**：

- **场景**：用于获取 Claude 知识截止日期之外的信息。
- **自动执行**：搜索在单个 API 调用内自动执行。
- 支持域名过滤（包含或屏蔽特定网站）。
- **地区限制**：网络搜索仅在美国可用。
- **日期意识**：注意 `<env>` 中的“今天的日期”。例如，如果今天是 2025-07-01，用户查询最新文档时，不要在搜索查询中使用 2024，应使用 2025。

------

## 5. Jupyter Notebook 支持

### 3.10 NotebookRead 工具

**功能**：从 Jupyter Notebook (`.ipynb`) 的所有代码单元中提取并读取源代码。 **使用规范**：

- 返回所有单元格及其输出。
- `notebook_path` 参数必须是**绝对路径**，不是相对路径。

### 3.11 NotebookEdit 工具

**功能**：替换 Jupyter Notebook 中特定单元格的内容。 **使用规范**：

- 用新源代码完全替换指定单元格的内容。